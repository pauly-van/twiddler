<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;700&family=Source+Sans+Pro:ital,wght@0,600;1,200&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <section class="main-container">
      <header>
        <h1>Paul's Twiddler</h1>
        <p class="subtitle">A small collection of your tweets</p>
      </header>
      <div class="tweetArea">
      <h2 class='tweetheader'>Incoming</h2>
        <section class='main'></section>
        <section class='new'></section>
      </div>
      <button class='getFeed-btn' type='button'>New Feed!</button>
    </section>
    <script>
      $(document).ready(function(){
        var $body = $('tweetArea');
        $body.html('');

        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div class=addTweets></div>');
          var $user = $('<p class=user></p>');
          var $msg = $('<p class=msg></p>');
          var $timeStamp = $('<p class=timeStamp></p>');
          $user.text('@'+tweet.user+':').appendTo($tweet);
          $user.addClass(tweet.user).attr('data-msg',tweet.user)          
          $msg.text(tweet.message).appendTo($tweet);
          $timeStamp.text(tweet.created_at.toUTCString()).appendTo($tweet);
          $tweet.appendTo('.main');
          index -= 1;
        }

      $('.getFeed-btn').on('click', function(){
        generateRandomTweet();

        var addTweet = streams.home.pop();
        var $addTweet = $('<div class=addTweets></div>');
        var $addUser = $('<p class=user></p>');
        var $addMsg = $('<p class=msg></p>');
        var $addTimeStamp = $('<p class=timeStamp></p>');
        $addUser.addClass(addTweet.user).text('@'+addTweet.user+':').appendTo($addTweet);
        $addMsg.text(addTweet.message).appendTo($addTweet);
        $addTimeStamp.text(new Date().toUTCString()).appendTo($addTweet);
        $addTweet.appendTo('.new');
      });

      $('.tweetArea').on('click','.addTweets .user', function(event){
       event.preventDefault();
       var user = $(this).data('msg');
       $('.new').hide();
       $('.addTweets').not("div:contains('" + user + "')").hide(400);
       $("div:contains('" + user + "')").show(400);
      });
      
    });
      
    </script>
  </body>
</html>